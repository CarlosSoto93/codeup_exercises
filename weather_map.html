<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <style>
        #main-container {
            background-color: lightcyan;
        }

        .col-sm-4 {
            border: solid gray;
            border-width: thin;
            background-color: white;
        }

        #info-list {
            margin: 10px;

        }
    </style>

</head>
<body>

<div id="main-container" class="container-fluid">
    <h1>Weather Application</h1>
    <h3 id="name-of-location"></h3>
    <div id="info-list" class="row"></div>
</div>

<lable>Latitude:</lable><input id="lat" type="text">
<lable>Longitude:</lable><input id="lon" type="text">
<button id="update">Update</button>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script
        src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script>

    (function() {
        "use strict";
        var location = '';
        var content = '';
        var lat = $('#lat').val();
        var lon = $('#lon').val();

        //Generate weather info for San Antonio
        function ajaxRequest() {
            $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
                APPID: "bbcca73dfad97a24da03e3ed56c0638e",
                q: "San Antonio, TX",
                units: "imperial"
            }).done(function (data) {
//                console.log(data);
                for (var i = 0; i < 3; i++) {
                    var iconCode = data.list[i].weather[0].icon;
                    var iconUrl = "http://openweathermap.org/img/w/" + iconCode + ".png";
                    location = '';
                    location += data.city.name;
                    content += "<div class='col-sm-4 text-center'><strong>" + data.list[i].temp.max + "/" + data.list[i].temp.min + "</strong><br><br>";
                    content += "<span class='icon'></span><br><br>";
                    content += "<strong>" + data.list[i].weather[0].main + ": </strong>" + data.list[i].weather[0].description + "<br><br>";
                    content += "<strong>Humidity:</strong> " + data.list[i].humidity + "<br><br>";
                    content += "<strong>Wind:</strong> " + data.list[i].speed + "<br><br>";
                    content += "<strong>Pressure:</strong> " + data.list[i].pressure + "</div>";
                    $("#info-list").html(content);
                    $(".icon").html("<img src='" + iconUrl + "'>");
                }
                $("#name-of-location").html(location);
            });
        }

        ajaxRequest();


        $('#update').click(function() {
            console.log($('#lat').val());
            console.log($('#lon').val());
            $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
                APPID: "bbcca73dfad97a24da03e3ed56c0638e",
                lat: $('#lat').val(),
                lon: $('#lon').val(),
                units: "imperial"
            }).done(function(data) {
                console.log(data);
                content = '';
                for (var i = 0; i < 3; i++) {
                    var iconCode = data.list[i].weather[0].icon;
                    var iconUrl = "http://openweathermap.org/img/w/" + iconCode + ".png";
                    location = '';
                    location += data.city.name;
                    content += "<div class='col-sm-4 text-center'><strong>" + data.list[i].temp.max + "/" + data.list[i].temp.min + "</strong><br><br>";
                    content += "<span class='icon'></span><br><br>";
                    content += "<strong>" + data.list[i].weather[0].main + ": </strong>" + data.list[i].weather[0].description + "<br><br>";
                    content += "<strong>Humidity:</strong> " + data.list[i].humidity + "<br><br>";
                    content += "<strong>Wind:</strong> " + data.list[i].speed + "<br><br>";
                    content += "<strong>Pressure:</strong> " + data.list[i].pressure + "</div>";
                    $("#info-list").html(content);
                    $(".icon").html("<img src='" + iconUrl + "'>");
                }
                $("#name-of-location").html(location);
            });
        })

    })();

</script>

</body>
</html>